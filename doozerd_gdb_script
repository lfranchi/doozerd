TMP_FILE=$(mktemp /tmp/doozer_gdb_script.XXXXXX)

cat<<EOF>$TMP_FILE
set height 0
file doozerd
set args -timeout 5 -l 127.0.0.1:38046 -a 127.0.0.1:38047
b learner.go:50 if from < 0
commands
print "* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * "
print " from < 0
print "* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * "
list 50
end
run
EOF


/usr/local/bin/gdb --command=$TMP_FILE

rm $TMP_FILE
